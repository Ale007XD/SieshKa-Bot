# Food Delivery Telegram Bot

Полнофункциональный Telegram бот для доставки еды с ролевой системой управления заказами.

## 🚀 Возможности

### Для клиентов:
- 📋 Просмотр меню с 3-х уровневой структурой категорий
- 🛒 Корзина с возможностью добавления модификаторов
- 💳 Оформление заказа с выбором способа оплаты
- 📦 Отслеживание статуса заказа
- 📱 Удобный интерфейс на русском языке

### Для администраторов:
- 📁 Управление категориями и товарами
- 📦 Управление заказами
- 📊 Статистика и отчеты
- 👥 Управление персоналом
- 📦 Архивирование товаров и категорий
- 📥 Импорт/экспорт меню

### Для персонала:
- **Менеджер**: подтверждение заказов, управление оплатой
- **Кухня**: приготовление заказов
- **Упаковщик**: упаковка готовых заказов
- **Курьер**: доставка заказов

## 🛠 Технологический стек

- **Python 3.11+**
- **aiogram 3.x** - Telegram Bot API
- **FastAPI** - REST API
- **PostgreSQL 15+** - База данных
- **Redis** - Кэш и очереди
- **Celery** - Фоновые задачи
- **SQLAlchemy 2.0** - ORM
- **Alembic** - Миграции базы данных
- **Docker & Docker Compose** - Контейнеризация

## 📦 Установка

### Требования
- Docker и Docker Compose
- Минимум 2GB RAM
- 10GB свободного места на диске

### Быстрый старт

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd food-delivery-bot
```

2. Создайте файл `.env` на основе `.env.example`:
```bash
cp .env.example .env
# Отредактируйте .env и укажите свои значения
```

3. Запустите приложение:
```bash
make prod
```

4. Создайте администратора:
```bash
make create-admin TELEGRAM_ID=your_telegram_id
```

## 📖 Документация

- [DEPLOYMENT.md](DEPLOYMENT.md) - Подробная инструкция по развертыванию
- [BACKUP_AND_RESTORE.md](BACKUP_AND_RESTORE.md) - Резервное копирование и восстановление
- [ADMIN_GUIDE.md](ADMIN_GUIDE.md) - Руководство администратора
- [MANAGER_GUIDE.md](MANAGER_GUIDE.md) - Руководство менеджера
- [KITCHEN_GUIDE.md](KITCHEN_GUIDE.md) - Руководство для кухни
- [PACKER_GUIDE.md](PACKER_GUIDE.md) - Руководство упаковщика
- [COURIER_GUIDE.md](COURIER_GUIDE.md) - Руководство курьера
- [CLIENT_GUIDE.md](CLIENT_GUIDE.md) - Руководство клиента
- [API_REFERENCE.md](API_REFERENCE.md) - Документация API
- [DEVELOPMENT.md](DEVELOPMENT.md) - Руководство разработчика
- [TROUBLESHOOTING.md](TROUBLESHOOTING.md) - Устранение неполадок

## 🔧 Команды Makefile

```bash
make build      # Сборка образов Docker
make up         # Запуск development окружения
make down       # Остановка контейнеров
make logs       # Просмотр логов
make test       # Запуск тестов
make migrate    # Применение миграций
make backup     # Создание резервной копии
make prod       # Запуск production окружения
```

## 🏗 Архитектура

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Telegram  │────▶│     Bot     │────▶│  PostgreSQL │
│   Client    │     │   (aiogram) │     │   (data)    │
└─────────────┘     └─────────────┘     └─────────────┘
                            │
                            ▼
                    ┌─────────────┐
                    │    Redis    │
                    │  (cache)    │
                    └─────────────┘
                            │
                            ▼
                    ┌─────────────┐
                    │    Celery   │
                    │   (tasks)   │
                    └─────────────┘
```

## 🔐 Безопасность

- Все пароли хранятся в зашифрованном виде
- Используется JWT для API аутентификации
- Ролевая система доступа (RBAC)
- Валидация всех входных данных
- Защита от SQL-инъекций через ORM
- Логирование всех действий администраторов

## 📄 Лицензия

MIT License - см. [LICENSE](LICENSE)

## 🤝 Поддержка

При возникновении проблем смотрите [TROUBLESHOOTING.md](TROUBLESHOOTING.md) или создавайте Issue.

## 📝 Changelog

См. [CHANGELOG.md](CHANGELOG.md) для истории изменений.
